# 프록시 패턴과 프록시 서버

- 프록시 객체는 프록시 패턴이 녹아들어 있는 객체

## 프록시 패턴

- 대상 객체에 접근하기 전 **그 접근에 대한 흐름을 가로채** 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴
- 속성, 변환 등을 보완하고 보안, 데이터 검증, 캐싱, 로깅에 사용
  > 프록시 서버에서의 캐싱  
  > 캐시 안에 정보를 담아두고, 캐시 안에 있는 정보를 요구하는 요청에 캐시 안에 있는 데이터를 활용한다. 트래픽을 줄일 수 있다.

## 프록시 서버

- 서버와 클라이언트 사이에서 클라이언트가 자신(프록시)을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램
- nginx
  - 비동기 이벤트 기반의 구조와 다수의 연결을 효과적으로 처리 가능한 웹 서버
  - Node.js 서버 앞단의 프록시 서버로 활용됨
  - 익명 사용자의 직접적인 서버 접근을 차단
  - 간접적으로 한 단계를 더 거침으로서 보안성을 강화함
  - 실제 포트를 숨길 수 있음
  - 정적 자원을 gzip압축하거나 메인서버 앞단에서 로깅할 수 있음
    - **버퍼 오버플로우:** 버퍼는 데이터가 저장되는 메모리 공간으로, 메모리 공간을 벗어나는 경우를 말함. 이때 사용되지 않아야 할 영역에 데이터가 덮어씌워져 주소, 값을 바꾸는 공격이 발생하기도 한다.
    - **gzip 압축:** LZ77과 Huffman 코딩의 조합인 DEFLATE 알고리즘을 기반으로 한 압축 기술. 데이터 전송량을 줄일 수 있다. 그러나 압축을 해제했을 때 서버의 CPU 오버헤드도 생각해서 압축 유무를 결정해야 한다.
- CloudFlare

  - 전 세계적으로 분산된 서비스가 있고, 어떠한 시스템의 콘텐츠 전달을 빠르게 할 수 있는 CDN 서비스
    > CDN: 각 사용자가 접속하는 곳과 가까운 곳에서 콘텐츠를 캐싱, 배포하는 서버 네트워크
  - DDOS 공격 방어
    - 짧은 시간 동안 네트워크에 많은 요청을 보내 네트워크를 마비시켜 웹 사이트의 가용성을 방해
    - 의심스러운 트래픽, 시스템을 통해 오는 트래픽을 자동으로 차단해서 DDOS 공격을 보호
  - HTTPS 구축
    - 인증서를 기반으로 구축할 수 있지만, CloudFlare는 별도의 인증서 없이 구축 가능

- CORS와 프론트엔드의 프록시 서버
  - 서버가 웹 브라우저에서 리소스를 로드할 때 **다른 오리진**을 통해 로드하지 못하게 하는 HTTP 헤더 기반 메커니즘
    > 오리진: 프로토콜, 호스트 이름, 포트의 조합
  - 프론트엔드: 127.0.0.1:3000
  - 백엔드: 127.0.0.1:12010
  - 포트번호가 다르므로 CORS 에러가 나타남
  - 프록시 서버로 프론트엔드에서 요청되는 오리진을 127.0.0.1:12010 으로 바꾼다.
    > 127.0.0.1 : 루트백 IP, 본인 PC의 IP  
    > localhost나 루트백 IP을 입력하면 DNS를 타지 않고 바로 본인 PC로 연결됨
    >
    > - DNS: 도메인 이름 시스템. 사람이 읽을 수 있는 이름을 머신이 읽을 수 있는 IP로 변환한다.

[CORS에 대한 자세한 동영상](http://bit.ly/3KfzrBh)
